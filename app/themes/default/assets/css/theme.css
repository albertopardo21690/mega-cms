body {
    font-family: system-ui, Arial;
    margin: 0;
    padding: 0;
}

header, footer {
    padding: 20px;
    background: #111;
    color: #fff;
}

main {
    padding: 24px;
}

/* Menú base */
.nav { display: flex; align-items: center; }
.menu { list-style: none; margin: 0; padding: 0; display: flex; gap: 12px; align-items: center; }
.menu-item { position: relative; }
.menu-link { text-decoration: none; display: inline-block; padding: 6px 8px; }

/* Submenús (dropdown) */
.menu-item.has-children > .menu { 
  position: absolute;
  top: 100%;
  left: 0;
  min-width: 200px;
  background: #fff;
  border: 1px solid #eee;
  border-radius: 10px;
  padding: 8px;
  display: none;
  flex-direction: column;
  gap: 6px;
  z-index: 50;
}

/* Mostrar dropdown en hover/focus */
.menu-item.has-children:hover > .menu,
.menu-item.has-children:focus-within > .menu {
  display: flex;
}

/* Nivel 2+ (submenu dentro de submenu) */
.menu-level-2,
.menu-level-3,
.menu-level-4 {
  top: 0;
  left: 100%;
  margin-left: 8px;
}

/* Responsive simple: apila */
@media (max-width: 768px) {
  .menu { flex-direction: column; align-items: flex-start; gap: 6px; }
  .menu-item.has-children > .menu {
    position: static;
    border: none;
    padding: 6px 0 0 12px;
    display: flex; /* en móvil lo dejamos expandido por simplicidad */
  }
}

/* --- NAV base --- */
.nav { display: flex; align-items: center; gap: 12px; }
.nav-toggle { display: none; padding: 8px 10px; border: 1px solid #ddd; border-radius: 10px; background: #fff; cursor: pointer; }
.nav-panel { display: block; }

/* --- Menú base --- */
.menu { list-style: none; margin: 0; padding: 0; display: flex; gap: 12px; align-items: center; }
.menu-item { position: relative; }
.menu-row { display: flex; align-items: center; gap: 8px; }
.menu-link { text-decoration: none; display: inline-block; padding: 6px 8px; }
.submenu-toggle { display: none; border: 1px solid #ddd; border-radius: 10px; background: #fff; padding: 4px 8px; cursor: pointer; }

/* --- Desktop dropdown (hover/focus) --- */
.menu-item.has-children > .submenu {
  position: absolute;
  top: 100%;
  left: 0;
  min-width: 220px;
  background: #fff;
  border: 1px solid #eee;
  border-radius: 10px;
  padding: 8px;
  z-index: 50;
}

/* En desktop, el contenedor submenu se muestra con hover/focus */
@media (min-width: 769px) {
  .menu-item.has-children > .submenu[hidden] { display: none !important; }
  .menu-item.has-children:hover > .submenu,
  .menu-item.has-children:focus-within > .submenu {
    display: block !important;
  }
}

/* --- Mobile --- */
@media (max-width: 768px) {
  .nav { width: 100%; justify-content: space-between; }
  .nav-toggle { display: inline-flex; align-items: center; gap: 8px; }
  .nav-panel { width: 100%; margin-top: 10px; border: 1px solid #eee; border-radius: 12px; padding: 10px; background: #fff; }
  .menu { flex-direction: column; align-items: stretch; gap: 6px; }
  .menu-link { width: 100%; padding: 10px 10px; }
  .submenu-toggle { display: inline-flex; align-items: center; justify-content: center; }

  /* Submenu en móvil: siempre “inline”, controlado por hidden */
  .menu-item.has-children > .submenu {
    position: static;
    border: none;
    padding: 0 0 0 12px;
    margin: 0;
    background: transparent;
  }
}

/* Animaciones suaves */
.nav-panel {
  transition: opacity .15s ease, transform .15s ease;
}
.nav-panel[hidden] {
  display: block;           /* para permitir animar */
  opacity: 0;
  transform: translateY(-6px);
  pointer-events: none;
  height: 0;
  overflow: hidden;
  padding: 0 !important;
  border-width: 0 !important;
  margin: 0 !important;
}

.submenu {
  transition: max-height .2s ease, opacity .2s ease;
}
.submenu[hidden] {
  display: block;
  max-height: 0;
  opacity: 0;
  overflow: hidden;
}
.submenu:not([hidden]) {
  max-height: 1200px; /* suficiente para menús normales */
  opacity: 1;
}